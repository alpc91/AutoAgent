<workflow>
    <name>task_comprehensive_understanding_and_planning</name>
    <system_input>
        <key>user_task_description</key>
        <description>用户提供的任务描述，需要综合理解并进行规划。</description>
    </system_input>
    <system_output>
        <key>final_plan</key>
        <description>经过多个智能代理处理后生成的最终任务规划方案。</description>
    </system_output>
    <agents>
        <agent category="existing">
            <name>Task_Parser_Agent</name>
            <description>解析任务内容并提取关键信息和目标。</description>
        </agent>
        <agent category="existing">
            <name>Task_Target_Agent</name>
            <description>结合实际条件确认任务的实际可行目标。</description>
        </agent>
        <agent category="existing">
            <name>Task_Decomposition_Agent</name>
            <description>将任务分解为多个子任务，并定义每个子任务的目标、优先级及所需资源。</description>
        </agent>
        <agent category="existing">
            <name>Evaluate_Predictive_Agent</name>
            <description>评估子任务可行性，预测潜在障碍及风险，提出优化建议。</description>
        </agent>
    </agents>
    <events>
        <event>
            <name>on_start</name>
            <inputs>
                <input>
                    <key>user_task_description</key>
                    <description>用户提供的任务描述。</description>
                </input>
            </inputs>
            <outputs>
                <output>
                    <key>user_task_description</key>
                    <description>用户提供的任务描述。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
        </event>
        <event>
            <name>parse_task</name>
            <inputs>
                <input>
                    <key>user_task_description</key>
                    <description>用户提供的任务描述。</description>
                </input>
            </inputs>
            <task>解析任务内容并提取关键信息和目标。</task>
            <outputs>
                <output>
                    <key>parsed_task_info</key>
                    <description>解析后的任务关键信息和目标。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Task_Parser_Agent</name>
                <model>hosted_vllm/Qwen/QwQ-32B-AWQ</model>
            </agent>
        </event>
        <event>
            <name>confirm_target</name>
            <inputs>
                <input>
                    <key>parsed_task_info</key>
                    <description>解析后的任务关键信息和目标。</description>
                </input>
            </inputs>
            <task>结合实际条件确认任务的实际可行目标。</task>
            <outputs>
                <output>
                    <key>confirmed_targets</key>
                    <description>确认后的任务实际可行目标。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>parse_task</event>
            </listen>
            <agent>
                <name>Task_Target_Agent</name>
                <model>hosted_vllm/Qwen/QwQ-32B-AWQ</model>
            </agent>
        </event>
        <event>
            <name>decompose_task</name>
            <inputs>
                <input>
                    <key>confirmed_targets</key>
                    <description>确认后的任务实际可行目标。</description>
                </input>
            </inputs>
            <task>将任务分解为多个子任务，并定义每个子任务的目标、优先级及所需资源。</task>
            <outputs>
                <output>
                    <key>subtasks</key>
                    <description>分解后的子任务列表及其相关信息。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>confirm_target</event>
            </listen>
            <agent>
                <name>Task_Decomposition_Agent</name>
                <model>hosted_vllm/Qwen/QwQ-32B-AWQ</model>
            </agent>
        </event>
        <event>
            <name>evaluate_subtasks</name>
            <inputs>
                <input>
                    <key>subtasks</key>
                    <description>分解后的子任务列表及其相关信息。</description>
                </input>
            </inputs>
            <task>评估子任务可行性，预测潜在障碍及风险，提出优化建议。</task>
            <outputs>
                <output>
                    <key>evaluated_subtasks</key>
                    <description>经过评估后的子任务列表及其优化建议。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>decompose_task</event>
            </listen>
            <agent>
                <name>Evaluate_Predictive_Agent</name>
                <model>hosted_vllm/Qwen/QwQ-32B-AWQ</model>
            </agent>
        </event>
        <event>
            <name>generate_final_plan</name>
            <inputs>
                <input>
                    <key>evaluated_subtasks</key>
                    <description>经过评估后的子任务列表及其优化建议。</description>
                </input>
            </inputs>
            <task>汇总所有子任务的评估结果，形成最终的任务规划方案。</task>
            <outputs>
                <output>
                    <key>final_plan</key>
                    <description>最终生成的任务规划方案。</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>evaluate_subtasks</event>
            </listen>
            <agent>
                <name>Task_Decomposition_Agent</name>
                <model>hosted_vllm/Qwen/QwQ-32B-AWQ</model>
            </agent>
        </event>
    </events>
</workflow>